<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Quiz</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-center p-8">
  <div id="app" class="max-w-xl mx-auto bg-white rounded-2xl shadow-xl p-6">
    <h1 class="text-2xl font-bold mb-4">Quiz</h1>
    <div id="question-container" class="mb-4"></div>
    <div id="options" class="grid grid-cols-2 gap-4 mb-4"></div>
    <div id="result" class="text-xl font-semibold"></div>
    <div id="score" class="mt-4 text-sm text-gray-600"></div>
    <button id="next-btn" class="mt-4 hidden bg-blue-500 text-white px-4 py-2 rounded">Następne</button>
  </div>

  <script>
    let questions = []
    let current = 0
    let correct = 0
    let wrong = 0

    async function loadQuestions() {
      const res = await fetch("http://localhost:8000/questions")
      questions = await res.json()
      showQuestion()
    }

    function showQuestion() {
      document.getElementById("result").innerText = ""
      const q = questions[current]
      document.getElementById("question-container").innerText = q.question
      const optionsDiv = document.getElementById("options")
      optionsDiv.innerHTML = ""
      q.options.forEach((opt, i) => {
        const btn = document.createElement("button")
        btn.innerText = opt
        btn.className = "bg-gray-200 hover:bg-gray-300 p-2 rounded"
        btn.onclick = () => checkAnswer(i, q.correct_answer)
        optionsDiv.appendChild(btn)
      })
    }

    function checkAnswer(selected, correctIndex) {
      const result = document.getElementById("result")
      if (selected === correctIndex) {
        result.innerText = "✅ Dobrze!"
        correct++
      } else {
        result.innerText = "❌ Źle!"
        wrong++
      }
      document.getElementById("score").innerText = `Dobre: ${correct}, Złe: ${wrong}`
      document.getElementById("next-btn").style.display = "block"
    }

    document.getElementById("next-btn").onclick = () => {
      current++
      if (current < questions.length) {
        showQuestion()
        document.getElementById("next-btn").style.display = "none"
      } else {
        document.getElementById("question-container").innerText = "Koniec quizu!"
        document.getElementById("options").innerHTML = ""
        document.getElementById("result").innerText = ""
        document.getElementById("next-btn").style.display = "none"
      }
    }

    loadQuestions()
  </script>
</body>
</html>
